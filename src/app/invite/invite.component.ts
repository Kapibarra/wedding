import { Component, OnInit } from '@angular/core';
import { ActivatedRoute } from '@angular/router';

@Component({
  selector: 'app-invite',
  templateUrl: './invite.component.html',
  styleUrls: ['./invite.component.scss'],
})
export class InviteComponent implements OnInit {
  isMapActive: boolean = false;
  isInviteActive: boolean = false;
  hasInteracted: boolean = false;
  title = '–°–≤–∞–¥—å–±–∞ –ê–Ω–Ω—ã-–ú–∞—Ä–∏–∏ –∏ –ù–∏–∫–∏—Ç—ã';
  guestName: string = '';
  arrivalTime: string = '';
  guestCount: string = '';
  mainText: string = '';
  id: string | null = null;

  private guestData: {
    [key: string]: {
      name: string;
      arrivalTime: string;
      mainText: string;
      guestCount: string;
    };
  } = {
    '1': {
      name: '–î–∏–º–∞ –∏ –ù–∞—Å—Ç—è',
      arrivalTime: '12:00',
      guestCount: '–≤–∞–º–∏',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞. –ú–µ—Å—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤–∞—Å –Ω–∞ —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –Ω–æ –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–π–¥–µ–º –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ!',
    },
    '2': {
      name: '–ü–∞–ø–∞ –∏ –ù–∞—Å—Ç—è',
      arrivalTime: '11:00',
      guestCount: '–≤–∞–º–∏',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞ –Ω–∞ 35 —ç—Ç–∞–∂–µ. –ù–∞ —Ü–µ—Ä–µ–º–æ–Ω–∏—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω—ã —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –ª—é–¥–∏ ü§ç',
    },
    '3': {
      name: '–ò–≥–æ—Ä—å',
      guestCount: '—Ç–æ–±–æ–π',
      arrivalTime: '12:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞. –ú–µ—Å—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Ç–µ–±—è –Ω–∞ —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –Ω–æ –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–π–¥–µ–º –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ!',
    },
    '4': {
      name: '–ü–∞–ø–∞ –∏ –º–∞–º–∞',
      guestCount: '–≤–∞–º–∏',
      arrivalTime: '11:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞ –Ω–∞ 35 —ç—Ç–∞–∂–µ. –ù–∞ —Ü–µ—Ä–µ–º–æ–Ω–∏—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω—ã —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –ª—é–¥–∏ ü§ç',
    },
    '5': {
      name: '–ù–∏–∫–∏—Ç–∞',
      guestCount: '—Ç–æ–±–æ–π',
      arrivalTime: '12:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞. –ú–µ—Å—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Ç–µ–±—è –Ω–∞ —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –Ω–æ –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–π–¥–µ–º –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ!',
    },
    '6': {
      name: '–î–∏–º–∞',
      guestCount: '—Ç–æ–±–æ–π',
      arrivalTime: '12:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞. –ú–µ—Å—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Ç–µ–±—è –Ω–∞ —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –Ω–æ –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–π–¥–µ–º –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ!',
    },
    '7': {
      name: '–ú–∞—Ä—É—Å—è',
      guestCount: '—Ç–æ–±–æ–π',
      arrivalTime: '11:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞ –Ω–∞ 35 —ç—Ç–∞–∂–µ. –ù–∞ —Ü–µ—Ä–µ–º–æ–Ω–∏—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω—ã —Å–∞–º—ã–µ –±–ª–∏–∑–∫–∏–µ –ª—é–¥–∏ ü§ç',
    },
    '8': {
      name: '–¢–∞—Å—è –∏ –ï–≥–æ—Ä',
      guestCount: '–≤–∞–º–∏',
      arrivalTime: '12:00',
      mainText:
        '–†–æ—Å–ø–∏—Å—å –ø—Ä–æ–π–¥–µ—Ç –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ ¬´–†–æ–º–∞–Ω—Ç–∏–∫¬ª –≤ –∑–¥–∞–Ω–∏–∏ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –£–∫—Ä–∞–∏–Ω–∞. –ú–µ—Å—Ç–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π, –ø–æ—ç—Ç–æ–º—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤–∞—Å –Ω–∞ —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ, –Ω–æ –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–π–¥–µ–º –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≤ –Ω–æ–≤–æ–º —Å—Ç–∞—Ç—É—Å–µ!',
    },
  };

  constructor(private route: ActivatedRoute) {}

  ngOnInit(): void {
    const id = this.route.snapshot.paramMap.get('id');
    this.id = id;
    console.log('ID:', this.id);
    this.updateGuestInfo();
  }
  updateGuestInfo(): void {
    if (this.id) {
      if (this.guestData[this.id]) {
        const guest = this.guestData[this.id];
        this.guestName = guest.name;
        this.guestCount = guest.guestCount;
        this.arrivalTime = guest.arrivalTime;
        this.mainText = guest.mainText;
      } else {
        this.guestName = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–æ—Å—Ç—å';
        this.arrivalTime = '';
        this.mainText = '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞';
      }
    } else {
      this.guestName = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≥–æ—Å—Ç—å';
      this.arrivalTime = '';
      this.mainText = '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞';
    }
  }
  onToggleClick(): void {
    this.isMapActive = !this.isMapActive;
    setTimeout(() => {
      this.isInviteActive = true;
    }, 10000); // –ü—Ä–∏–º–µ—Ä 10 —Å–µ–∫—É–Ω–¥
  }

  playAudio(): void {
    if (this.hasInteracted) {
      const audio = <HTMLAudioElement>document.getElementById('myAudio');
      if (audio) {
        audio.play().catch((error) => {
          console.error('Error playing audio:', error);
        });
      }
    }
  }

  onUserInteraction(): void {
    this.hasInteracted = true;
    this.playAudio();
  }
}
